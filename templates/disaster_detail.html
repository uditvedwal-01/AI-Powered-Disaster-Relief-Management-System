<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Disaster Detail</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container py-4">
      <div class="d-flex justify-content-between align-items-end mb-2">
        <div class="d-flex align-items-center gap-3">
          <h2 class="mb-0">{{ disaster.Name }}</h2>
          <span class="badge text-bg-secondary"
            >{{ disaster.Severity or '-' }}</span
          >
          <a
            href="{{ url_for('show_disaster_tables', disaster_id=disaster.DisasterID) }}"
            class="btn btn-sm btn-outline-info"
            >View Records</a
          >
        </div>
        <div class="d-flex align-items-center gap-3">
          <a
            href="{{ url_for('analyze', disaster_id=disaster.DisasterID) }}"
            class="btn btn-warning btn-sm"
            >Analyze</a
          >
          <a
            href="{{ url_for('predict', disaster_id=disaster.DisasterID) }}"
            class="btn btn-info btn-sm"
            >Predict</a
          >
        </div>
      </div>
      <p class="text-muted">
        {{ disaster.Type or '—' }} • {{ disaster.Location or '—' }} • {{
        disaster.StartDate }}{% if disaster.EndDate %} — {{ disaster.EndDate
        }}{% endif %}
      </p>

      <div class="row g-4">
        <div class="col-lg-6">
          <div class="card p-3 h-100">
            <h5>Warehouses & Inventory</h5>
            <ul class="list-group list-group-flush">
              {% for item, wh in items %}
              <li
                class="list-group-item d-flex justify-content-between align-items-center"
              >
                <div>
                  <strong>{{ item.Name }}</strong>
                  <small class="text-muted">({{ item.Category or '-' }})</small
                  ><br />
                  <small class="text-muted">Warehouse: {{ wh.Location }}</small>
                </div>
                <span class="badge text-bg-primary">{{ item.Quantity }}</span>
              </li>
              {% else %}
              <li class="list-group-item text-muted">No inventory yet.</li>
              {% endfor %}
            </ul>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="card p-3 h-100">
            <h5>Recent Distributions</h5>
            <ul class="list-group list-group-flush">
              {% for dist, ben, item in distributions %}
              <li class="list-group-item">
                <strong>{{ ben.Name }}</strong> received {{ dist.Quantity }} x
                {{ item.Name }} on {{ dist.Date }}
              </li>
              {% else %}
              <li class="list-group-item text-muted">No distributions yet.</li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>

      <div class="mt-4 d-flex gap-3">
        <a
          class="btn btn-success"
          href="{{ url_for('add_resources', disaster_id=disaster.DisasterID) }}"
          >Insert Resources</a
        >
        <a
          class="btn btn-primary"
          href="{{ url_for('distribute', disaster_id=disaster.DisasterID) }}"
          >Record Distribution</a
        >
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
